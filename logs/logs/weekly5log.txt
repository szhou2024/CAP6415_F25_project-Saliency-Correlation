Applied finishing touches and slight debugs. Analyzed most and least correlated. Mostly with expectations, as non-occluded, singular objects tended to match very well between this model and the ground truth. Not surprisingly, lots of cats/dogs images did well (the model architecture is likely trained on MANY instance of those).

Least correlated is a head scratcher. The least correlated between model and ground truth are dominated by high texture food images. Model deemed background for these way more salient than food items themselves. Trucks, buses, and other vehicles I can somewhat understand because occlusion.

Did deeper dive, I understand the reasoning. Fine textures and other detailed features are going to get ignored because of the nature of initial setup, where all FPN layers are downsampled to match the lowest resolution/most coarse layer (pooling 8x10).

To confirm this, I needed to modify MultiEigenCAM class to change how reshape_transform worked. Instead of defaulting to FPN pool layer dimensions (always lowest), I ignored fasterrcnn_reshape_transform and created a modified_fasterrcnn_reshape_transform. This will allow me to specify which layer dimensions to match all 5 FPN layers to.

Seemed to do the trick. 15x20 and 30x40 are more "middle layers." We can see in most of the food images that EigenCAMS generated with these spatial dimensions produces DRASTICALLY higher correlation, with quite a few going from -.7 to .7.

Was curious, and applied a this same approach to top correlations. This expectedly dropped those correlations drastically.

Perhaps if I have time, I take a deeper look at balancing these. In the main implementation in grad-cam library, CAMs generated for each target_layer are averaged. Since I flattened it, model I'm using is only seeing 1 large "target_layer." This prevents averaging.

Hooking the first FPN layer (120x160) is impossible. This is because PCA on this matrix takes 1+ gb for the matrix itself, so doing EigenCAM requires 11gb per image (I tried this).

Last thing to do is create video with demo, working on a rough script right now. Creating a demo version.
